# Урок №28
## Кодинг и уязвимости


* [Лекция](28_Coding.pdf)
* [Домашняя работа](HW28.md)

## Mini-quize по прошлым темам:

<details>
  <summary>В каком формате передаются данные в REST API?</summary>
<br>

В REST API данные обычно передаются в формате **JSON (JavaScript Object Notation)** или **XML (Extensible Markup Language)**. JSON более популярен благодаря своей простоте, компактности и удобству для работы с языками программирования.

*Пример JSON:*

```
{
  "user": "Иван",
  "age": 30
}
```

*Пример XML:*

```
<user>
  <name>Иван</name>
  <age>30</age>
</user>
```

---

</details>

<details>
  <summary>Какие 2 основных метода используются в REST API?</summary>
<br>

Два основных метода, которые используются в REST API:  
1. **GET** — для получения данных с сервера.  
   *Пример:* получение списка пользователей.  
   GET /users
   
2. **POST** — для отправки данных на сервер (например, создания новых записей).  
   *Пример:* создание нового пользователя.  

```
   POST /users
   Content-Type: application/json
   {
     "name": "Иван",
     "age": 30
   }
```

Другие методы, такие как **PUT**, **DELETE**, **PATCH**, также используются, но реже.

---

</details>

<details>
  <summary>В чем заключается основное назначение расследования инцидента?</summary>
<br>

Основное назначение расследования инцидента — это:
1. **Выяснение причины инцидента**: Что именно произошло и как это повлияло на систему.  
2. **Локализация последствий**: Минимизация ущерба и предотвращение дальнейшего распространения проблемы.  
3. **Разработка рекомендаций**: Чтобы в будущем предотвратить подобные инциденты.  

*Пример:* Если система была атакована, расследование может выявить, каким образом злоумышленник получил доступ (например, через уязвимость) и какие данные были скомпрометированы.

---

</details>

<details>
  <summary>Какие системы вы бы подключили в SOAR? И какие плейбуки реагирования создавали?</summary>
<br>

В SOAR (Security Orchestration, Automation, and Response) можно подключить следующие системы:  
- **SIEM** (например, Splunk, ELK, QRadar): для сбора логов и аналитики.  
- **Антивирусы и EDR** (например, CrowdStrike, Symantec): для мониторинга конечных точек.  
- **Системы управления уязвимостями** (например, Nessus, Qualys): для устранения слабых мест.  
- **Почтовые системы** (например, Microsoft Exchange): для анализа фишинговых писем.  

**Плейбуки реагирования:**
1. **Реагирование на фишинг:** Автоматический анализ подозрительных писем, блокировка URL, уведомление пользователя.  
2. **Обнаружение вредоносного ПО:** Изоляция заражённого устройства, сбор артефактов, передача инцидента в расследование.  
3. **Обнаружение аномалий в сети:** Проверка подозрительных IP-адресов, блокировка подозрительного трафика, уведомление администратора.  

*Пример:* Если приходит подозрительное письмо, SOAR может автоматически извлечь вложения, проверить их через антивирусы и сообщить результаты сотруднику безопасности.

---

</details>


## Mini-quize по новой теме:

<details>
  <summary>В чем могут заключаться проблемы при использовании интерпретируемых ЯП?</summary>
<br>

Проблемы при использовании интерпретируемых языков программирования (ЯП) могут включать:  
1. **Снижение производительности**: Код интерпретируется строка за строкой во время выполнения, что делает его медленнее, чем компилируемые языки.  
2. **Зависимость от интерпретатора**: Программы требуют установленного интерпретатора для выполнения, что может быть проблемой на некоторых системах.  
3. **Безопасность**: Код интерпретируемых языков легче анализировать и эксплуатировать, поскольку он не превращается в бинарный формат.  

*Пример:* Скрипт на Python может работать медленно в вычислительно интенсивных задачах по сравнению с аналогом на C++.

---

</details>

<details>
  <summary>К чему может привести отсутствие обработчиков ошибок?</summary>
<br>

Отсутствие обработчиков ошибок может привести к:  
1. **Краху программы**: Ошибка в процессе выполнения (например, деление на ноль) может завершить работу всей программы.  
2. **Потере данных**: Без корректной обработки исключений данные могут быть повреждены или утрачены.  
3. **Уязвимостям в безопасности**: Необработанные ошибки могут раскрыть структуру программы (например, через сообщения об ошибках) или стать точкой для атак.  

*Пример:* Если приложение не обрабатывает ошибки подключения к базе данных, это может привести к потере доступа ко всем функциям, зависящим от базы.

---

</details>

<details>
  <summary>В чем заключается основная проблема при отсутствии валидации введенных данных?</summary>
<br>

Основная проблема заключается в том, что отсутствие валидации введенных данных открывает приложение для различных атак, таких как SQL-инъекции, XSS (межсайтовый скриптинг) и другие.  
1. **Непредсказуемое поведение программы**: Некорректные данные могут вызывать сбои или крах.  
2. **Уязвимости безопасности**: Злоумышленники могут ввести вредоносный код или получить доступ к данным.  
3. **Снижение качества данных**: Некачественные или некорректные данные в системе могут привести к ошибочным результатам.  

*Пример:* Если форма регистрации не проверяет длину введённого имени пользователя, злоумышленник может ввести чрезмерно длинный текст, что вызовет переполнение памяти.

---

</details>

<details>
  <summary>В чем отличие между переполнением буфера и инъекцией в код?</summary>
<br>

**Переполнение буфера**: Это уязвимость, при которой данные превышают размер выделенной памяти (буфера), что позволяет злоумышленнику перезаписать соседние участки памяти.  
- Используется для выполнения произвольного кода или краха программы.  
- *Пример:* Ввод слишком длинной строки в поле, не ограниченном по длине.  

**Инъекция в код**: Это атака, при которой злоумышленник вводит вредоносный код в программу, чтобы она его выполнила.  
- Часто происходит из-за недостаточной проверки входных данных.  
- *Пример:* SQL-инъекция, где вместо имени пользователя вводится запрос, получающий доступ ко всей базе данных.  

**Главное отличие**: Переполнение буфера связано с работой с памятью, а инъекция в код — с выполнением непроверенных данных.

---

</details>



## План занятия

<details>
  <summary>1. Рассмотрим возможные варианты атак на приложения</summary>
<br>

В рамках этого раздела изучим, какие угрозы могут затрагивать веб-приложения, мобильные приложения и программы для ПК. Основные виды атак включают:  

1. **SQL-инъекции**: Внедрение вредоносного SQL-кода для получения доступа к данным или управления ими.  
   *Пример:* Злоумышленник вводит `'; DROP TABLE users; --` в поле ввода, что приводит к удалению таблицы.  

2. **XSS (межсайтовый скриптинг)**: Внедрение вредоносного скрипта, который выполняется в браузере пользователя.  
   *Пример:* Ввод `<script>alert('Хак!')</script>` в комментарии на сайте.  

3. **Brute Force**: Перебор паролей или других данных для несанкционированного доступа.  
   *Пример:* Использование программ для автоматического подбора пароля к аккаунту.  

4. **DDoS-атаки**: Перегрузка сервера большим количеством запросов, что делает его недоступным для пользователей.  

5. **Атаки с использованием уязвимостей в API**: Неправильное управление токенами или слабая аутентификация может позволить злоумышленнику получить доступ к данным.  

---

</details>

<details>
  <summary>2. Рассмотрим на примере атаки на приложения, которые возможно произвести из-за ошибок в программировании</summary>
<br>

Ошибки в программировании часто становятся причиной успешных атак. Рассмотрим два примера:  

1. **SQL-инъекции из-за отсутствия валидации данных**:  
   *Ситуация:* Приложение не фильтрует пользовательский ввод перед выполнением SQL-запросов.  
   *Атака:* Злоумышленник вводит вредоносный SQL-код в поле ввода, получая доступ к базе данных или изменяя её.  
   *Решение:* Использовать параметризованные запросы и ORM (Object-Relational Mapping).  

2. **Переполнение буфера в низкоуровневых приложениях**:  
   *Ситуация:* Программа на C++ принимает строку от пользователя без проверки длины.  
   *Атака:* Злоумышленник вводит длинную строку, что приводит к записи данных за пределами буфера и возможности выполнения своего кода.  
   *Решение:* Проверка длины данных и использование защищённых функций, таких как strncpy.  

---

</details>

<details>
  <summary>3. Рассмотрим особенности низкоуровневых ЯП</summary>
<br>

Низкоуровневые языки программирования (например, C, Assembly) обеспечивают разработчику прямой доступ к памяти и аппаратным ресурсам, но также требуют повышенного внимания к безопасности.  

Особенности:  
1. **Работа с указателями**: Возможность напрямую управлять памятью.  
   *Риск:* Неправильное использование указателей может привести к утечкам памяти, переполнению буфера или доступу к чужим данным.  

2. **Отсутствие автоматической сборки мусора**: Разработчик сам управляет выделением и освобождением памяти.  
   *Риск:* Утечка памяти из-за забывчивости или двойного освобождения.  

3. **Отсутствие встроенной защиты от ошибок**: Например, переполнение буфера не контролируется системой.  
   *Решение:* Использование безопасных библиотек и инструментов для анализа кода.  

*Пример:* Неправильная работа с массивами:  

```
int arr[5];  
arr[10] = 42; // Переполнение массива  
```

---

</details>

<details>
  <summary>4. Рассмотрим алгоритмы хэширования</summary>
<br>

Алгоритмы хэширования используются для преобразования данных в уникальную фиксированную строку (хэш). Их главные задачи: проверка целостности данных и безопасное хранение паролей.  

1. **MD5**: Устаревший алгоритм, так как уже доказана возможность коллизий (одинаковых хэшей для разных данных).  
   *Пример:* Хэш строки `password`: `5f4dcc3b5aa765d61d8327deb882cf99`.  

2. **SHA-1**: Более безопасный, но также устаревший из-за возможностей коллизий.  

3. **SHA-256**: Современный и популярный алгоритм, используется в криптографии и блокчейне.  
   *Пример:* Хэш строки `password`: `5e884898da28047151d0e56f8dc6292773603d0d6aabbdd0f414b9eac64d3de`.  

4. **bcrypt**: Алгоритм для хэширования паролей с защитой от атак перебором (brute force), так как он включает адаптивный фактор сложности.  

---

</details>

<details>
  <summary>5. Так же изучим остальные виды ошибок при программировании</summary>
<br>

К распространённым видам ошибок относятся:  

1. **Ошибки логики**: Программа выполняет не то, что ожидалось.  
   *Пример:* Неправильное условие if (a = b) вместо if (a == b).  

2. **Синтаксические ошибки**: Ошибки в написании кода, которые мешают его компиляции.  
   *Пример:* Пропущена точка с запятой в C++.  

3. **Ошибки времени выполнения**: Например, деление на ноль или обращение к несуществующему индексу массива.  

4. **Ошибки управления памятью**: Утечки памяти, использование освобождённой памяти и др.  

5. **Неправильное взаимодействие с API**: Ошибки при использовании внешних библиотек и сервисов.  

---

</details>

<details>
  <summary>6. Разберемся с процессом внедрения шеллкодов и библиотек</summary>
<br>

Шеллкоды — это фрагменты машинного кода, которые используются для выполнения определённых команд или открытия обратного соединения (shell).  

**Этапы внедрения шеллкода:**  
1. **Обнаружение уязвимости**: Например, переполнение буфера.  
2. **Создание шеллкода**: Генерация вредоносного кода, выполняющего нужное действие (например, получение доступа).  
3. **Эксплуатация уязвимости**: Загрузка и выполнение шеллкода в целевой системе.  

*Пример шеллкода для Linux:*  

```
xor eax, eax  
mov al, 1  
int 0x80  
```

**Инъекция библиотек:**  
1. Используется для выполнения кода, не принадлежащего исходному приложению (например, DLL injection в Windows).  
2. Часто применяется в целях тестирования или эксплуатации.  

*Решение:* Использование современных методов защиты (ASLR, DEP) и регулярный аудит кода.  

---

</details>

